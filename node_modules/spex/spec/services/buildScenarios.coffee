#spec = require( '../spec.controller' )
parsimony = require( '../../domain.controller' ).parsimony


buildScenarios = (specDSL) ->
  AST = spec.parsimony.parse specDSL
  scenarios = spec.models.newScenario index, block.annotation, block.code for index, block of AST
  scenarios = _.new spec.Scenario index, block.annotation, block.code for index, block of AST

  _.run spec.functionName args

module.exports = buildScenarios

## TEST

#>> Given a some spec DSL

dsl = '''
       >> Given some dsl code
         foo = "foo"
       >> Then Bar is bar
         bar = "bar"
      '''

#>> When I pass *buildScenarios* the DSL code

#scenarios = buildScenarios dsl

#>> Then

scenarios.length.should.equal 2 # and
scenario.should.be.an.instanceof Scenario for scenario in scenarios

