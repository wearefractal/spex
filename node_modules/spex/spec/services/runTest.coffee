vm = require 'vm'

runTest = (testCode) ->
  status = 'notrun'

  try
    eval testCode
    status = 'pass'
  catch err
    @fail err.scenario, err
    status = 'fail'

  return status

module.exports = runTest


## TEST

localVar = 123
var2 = 122

usingscript = vm.runInThisContext 'localVar = 10;var2=3332', 'myfile.vm'
console.log "localVar: #{ localVar } usingscript: #{ usingscript }"

evaled = eval 'localVar = 110;'
console.log "localVar: #{ localVar } evaled: #{ evaled }"

